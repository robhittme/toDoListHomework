Templates={},Templates.posts=["<% _.each(posts, function(posts, index, list) { %>",'<li data-index= "<%= index %>" data-postsid="<%= posts._id %>"><%= posts.content %> <span class= "glyphicon glyphicon-trash deleteToDo"</span> </li>',"<% }); %>"].join("\n"),Templates.editModal=['<div class="modal-body">','<div class="form-group">','<label for="editModal"></label>','<input type="text" class="form-control editModal" value="<%= post.content %>">',"</div>","</div>",'<div class="modal-footer" data-postId="<%= post._id %>">','<input id="editModal" type="hidden" value="<%= post._id %>">','<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>','<button type="button" class="btn btn-primary submitupdate">Save changes</button>',"</div>"].join("\n"),$(function(){myToDo.init()});var dataURL="http://tiy-fee-rest.herokuapp.com/collections/robhittme",myToDo={init:function(){this.initStyling(),this.initEvents()},initStyling:function(){this.renderToDo()},initEvents:function(){$("#newListItem").on("submit",this.addToDoItem),$(".toDoListContent").on("click",".deleteToDo",this.checkToDo),$(".toDoListContent").on("dblclick","li",this.dblClickItem),$("#editModal").on("click",".submitupdate",function(a){a.preventDefault();var b=$(this).closest(".modal-footer").data("postid");console.log(b),myToDo.updatePost(b)})},addToDoItem:function(a){a.preventDefault();var b=$(".newListItem").val(),c={content:b};myToDo.addToDo(c),myToDo.renderToDo(),$(".newListItem").val("")},addToDo:function(a){var b=a;$.ajax({url:dataURL,type:"POST",data:b,error:function(){alert("YOU FUCKED UP")},success:function(){myToDo.renderToDo(),$(".itemsLeft").html(posts.length+" items left")}})},checkToDo:function(a){a.preventDefault();var b=$(this).closest("li").data("postsid");$(this).closest("li").toggleClass("checkItem"),myToDo.removeToDo(b);var c=$(".toDoListContent li").not(".checkItem");$(".itemsLeft").html(c.length+" items left")},removeToDo:function(a){$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/robhittme/"+a,type:"DELETE",error:function(){alert("YOU CANT DELETE WORTH SHIT!!")},success:function(){myToDo.renderToDo()}})},dblClickItem:function(){var a=$(this).data("postsid");$("#editModal").modal(),myToDo.renderModalPostDetail(a),$(".itemsLeft").html(posts.length+" items left")},updatePost:function(a){console.log("work in update method");var b=a,c={content:$(".editModal").val()};$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/robhittme/"+b,type:"PUT",data:c,error:function(a,b,c){alert("couldn't add post: "+c)},success:function(){console.log("in edit post"),$("#editModal").modal("hide"),myToDo.renderToDo()}})},render:function(a,b,c){var d=_.template(b,c);a.html(d)},renderToDo:function(){$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/robhittme",type:"GET",dataType:"json",error:function(){alert("You CANT GET LIKE A BITCH")},success:function(a){var b=window.posts=a;myToDo.render($(".toDoListContent"),Templates.posts,b),$(".itemsLeft").html(b.length+" items left")}})},renderModalPostDetail:function(a){$.ajax({url:"http://tiy-fee-rest.herokuapp.com/collections/robhittme/"+a,type:"GET",dataType:"json",error:function(){alert("render post detail is broken")},success:function(a){var b=window.post=a;myToDo.render($("#editPostForm"),Templates.editModal,b)}})}};